USE [moneyback]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [T].[SEARCH_RESULT](
	[IdResult] [int] IDENTITY(1,1) NOT NULL,
	[IdSearch] [int] NOT NULL,
	[IdAction] [int] NOT NULL,
	[AccountNumber] [int] NOT NULL,
	[CardNumber] [int] NOT NULL,
	[BalanceText] [varchar](50) COLLATE Cyrillic_General_CI_AI NULL,
	[BalanceNumeric] [decimal](38, 32) NULL,
	[PassportNumber] [nvarchar](100) COLLATE Cyrillic_General_CI_AI NULL,
	[ClientName] [nvarchar](200) COLLATE Cyrillic_General_CI_AI NULL,
 CONSTRAINT [PK_T_SEARCH_RESULT] PRIMARY KEY CLUSTERED 
(
	[IdResult] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON),
 CONSTRAINT [IX_T_SEARCH_RESULT] UNIQUE NONCLUSTERED 
(
	[IdSearch] ASC,
	[AccountNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO

ALTER TABLE [T].[SEARCH_RESULT] ADD  DEFAULT ((0)) FOR [IdAction]
GO

ALTER TABLE [T].[SEARCH_RESULT]  WITH CHECK ADD  CONSTRAINT [FK_SEARCH_RESULT_SEARCH_REQUEST] FOREIGN KEY([IdSearch])
REFERENCES [T].[SEARCH_REQUEST] ([IdSearch])
ON UPDATE CASCADE
GO

ALTER TABLE [T].[SEARCH_RESULT] CHECK CONSTRAINT [FK_SEARCH_RESULT_SEARCH_REQUEST]
GO

